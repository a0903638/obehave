language: java
jdk: oraclejdk8

env:
  - ANDROID_HOME="$HOME/.androidsdk"

before_cache:
  - rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
    - $ANDROID_HOME
#    - $HOME/.android-sdk # this may not be the best idea... - breaks the build, why?

before_install:
  # cache will create an empty directory when there is no sdk cached.
  # android-sdk won't download sdk manager when there is a directory
  - if ! [ "$(ls -A $ANDROID_HOME)" ]; then rm -r $ANDROID_HOME; fi

before_cache:
  - rm -f $HOME/.gradle/caches/modules-2/modules-2.lock

addons:
  apt:
    packages:
    - libstdc++6:i386
    - lib32z1
    - expect